{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 49,
  "summary": "Build a company website for 'The Lens' to sell trending/viral products, including electronics and home decor.",
  "architectural_notes": [
    "Custom domain setup on Internet Computer requires DNS records (CNAME/TXT + ACME challenge) and adding a .well-known/ic-domains file to the frontend build, followed by redeploy for SSL.",
    "Phone verification will require integrating an SMS/OTP provider (e.g., Twilio) and adding an OTP send/verify flow + secure session/auth handling (frontend UI + backend endpoints/canister methods)."
  ],
  "known_issues": [
    "Storefront only shows products with published=true; CMF earbuds product exists but was not visible because it was unpublished.",
    "Product images are not visible on the product page (user reports they cannot see the product images after deployment).",
    "After deploying Version 11, storefront shows an error and the user cannot view the listed product(s) (regression/blocker).",
    "After deploying Version 13, the user still cannot see the product images (image rendering issue persists).",
    "After deploying Version 14, the user still cannot see the product images (image rendering issue persists).",
    "After deploying Version 15, the user still cannot see the product images (image rendering issue persists).",
    "Storefront error: IC replica rejection (Reject code 5, IC0508) because backend canister dy7ez-6yaaa-aaaal-qufya-cai is stopped; query getProductsByCategory fails.",
    "After deploying Version 17, storefront still errors; user sees message: \"The store service is temporarily unavailable. Please try again in a moment.\" (different from prior error).",
    "After deploying Version 18, storefront shows \"failed to load images\" (product image load failure persists / new explicit error message observed).",
    "After deploying Version 19, storefront shows error message: \"The store service is temporarily unavailable. Please try again in a moment.\" (issue persists)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-public-marketing-storefront-website-for-the-company-name-the-lens-focused-on-selling-trending-viral-products-across-categories-like-electronics-and-home-decor-with-clear-navigation-featured-sections-and-calls-to-action-to-browse-products",
      "title": "Create a public marketing + storefront website for the company name \"The Lens\" focused on selling trending/viral products across categories like electronics and home decor, with clear navigation, featured sections, and calls-to-action to browse products.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-product-browsing-ux-category-filtering-at-minimum-electronics-and-home-decor-keyword-search-and-product-detail-pages-that-show-images-title-price-short-description-and-an-add-to-cart-action",
      "title": "Implement product browsing UX: category filtering (at minimum Electronics and Home Decor), keyword search, and product detail pages that show images, title, price, short description, and an Add-to-Cart action.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-shopping-cart-flow-on-the-frontend-add-remove-items-change-quantity-display-subtotal-and-proceed-to-a-checkout-form-that-collects-customer-details-name-email-phone-optional-shipping-address-and-order-notes",
      "title": "Implement a shopping cart flow on the frontend: add/remove items, change quantity, display subtotal, and proceed to a checkout form that collects customer details (name, email, phone optional, shipping address) and order notes.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-connect-the-frontend-to-the-backend-using-react-query-for-product-listing-product-details-and-order-creation-include-user-feedback-states-loading-empty-error-success",
      "title": "Connect the frontend to the backend using React Query for: product listing, product details, and order creation; include user feedback states (loading, empty, error, success).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-define-and-apply-a-cohesive-visual-theme-for-the-lens-suitable-for-a-modern-trending-products-brand-distinct-color-palette-typography-spacing-and-component-styling-and-apply-it-consistently-across-pages",
      "title": "Define and apply a cohesive visual theme for \"The Lens\" suitable for a modern trending-products brand (distinct color palette, typography, spacing, and component styling) and apply it consistently across pages.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-generated-static-brand-assets-and-wire-them-into-the-ui-logo-hero-banner-imagery-category-images-by-storing-them-under-frontend-public-assets-generated-and-referencing-them-directly-from-the-frontend-no-backend-image-serving",
      "title": "Add generated static brand assets and wire them into the UI (logo + hero/banner imagery + category images) by storing them under frontend/public/assets/generated and referencing them directly from the frontend (no backend image serving).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-centralized-frontend-content-configuration-module-that-contains-the-editable-marketing-copy-and-contact-details-used-across-the-site-e-g-brand-name-hero-badge-title-description-category-tile-headings-descriptions-about-page-paragraphs-footer-blurb-and-contact-info-like-email-phone-address-and-refactor-existing-pages-components-to-read-their-displayed-text-from-this-module",
      "title": "Create a centralized frontend content configuration module that contains the editable marketing copy and contact details used across the site (e.g., brand name, hero badge/title/description, category tile headings/descriptions, About page paragraphs, footer blurb, and contact info like email/phone/address), and refactor existing pages/components to read their displayed text from this module.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-simple-developer-facing-documentation-section-readme-snippet-or-code-comments-inside-the-content-config-file-describing-exactly-which-fields-to-edit-to-change-the-website-s-visible-text-and-contact-information-and-where-those-fields-appear-in-the-ui",
      "title": "Add a simple developer-facing documentation section (README snippet or code comments inside the content config file) describing exactly which fields to edit to change the website’s visible text and contact information, and where those fields appear in the UI.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-frontend-admin-products-page-that-allows-an-authenticated-admin-to-create-products-edit-product-fields-and-publish-unpublish-products-from-the-ui",
      "title": "Add a frontend admin Products page that allows an authenticated admin to create products, edit product fields, and publish/unpublish products from the UI.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-wire-the-new-admin-product-publishing-flows-into-the-frontend-data-layer-react-query-ensuring-storefront-pages-automatically-reflect-publish-unpublish-changes",
      "title": "Wire the new admin product publishing flows into the frontend data layer (React Query), ensuring storefront pages automatically reflect publish/unpublish changes.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-email-address-displayed-in-the-contact-section-on-the-about-contact-page-the-element-at-xpath-html-1-body-1-div-1-div-1-main-1-div-1-div-1-div-1-section-2-div-1-to-official-thelens-gmail-com-by-changing-the-centralized-content-value-used-for-that-email",
      "title": "Update the email address displayed in the Contact section on the About/Contact page (the element at XPath /html[1]/body[1]/div[1]/div[1]/main[1]/div[1]/div[1]/div[1]/section[2]/div[1]) to \"official.thelens@gmail.com\" by changing the centralized content value used for that email.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-call-us-phone-and-visit-us-address-sections-from-the-about-contact-page-contact-cards-so-only-the-email-contact-card-remains-visible",
      "title": "Remove the \"Call Us\" (phone) and \"Visit Us\" (address) sections from the About/Contact page contact cards so only the email contact card remains visible.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-about-contact-page-add-an-owner-credit-line-at-the-end-of-the-about-section-render-the-existing-built-with-using-caffeine-ai-line-in-the-about-section-with-a-clickable-caffeine-ai-link-and-directly-below-it-display-the-text-owner-name-vaibhav-sharma",
      "title": "On the About/Contact page, add an owner credit line at the end of the About section: render the existing “Built with using caffeine.ai” line in the About section (with a clickable caffeine.ai link), and directly below it display the text “OWNER NAME - VAIBHAV SHARMA.”",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-set-the-new-product-s-fields-as-follows-category-electronics-name-cmf-cc-bluetooth-earbuds-with-high-bass-sound-in-ear-tws-black-description-the-user-provided-specification-text-reformatted-into-readable-english-multi-line-or-bullet-style-while-preserving-all-provided-values-including-supc-sdl652881676-if-price-stock-or-published-status-cannot-be-derived-from-the-user-request-default-them-safely-and-keep-the-product-editable-via-the-existing-admin-products-page",
      "title": "Set the new product’s fields as follows: category = Electronics; name = \"CMF CC Bluetooth Earbuds With High Bass Sound In Ear TWS Black\"; description = the user-provided specification text reformatted into readable English (multi-line or bullet-style) while preserving all provided values (including SUPC: SDL652881676). If price, stock, or published status cannot be derived from the user request, default them safely and keep the product editable via the existing Admin Products page.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-the-4-user-uploaded-product-images-cmf-1-webp-cmf-2-webp-cmf-6-webp-cmf-7-webp-to-the-frontend-as-static-assets-and-render-them-on-the-product-detail-page-for-this-product-at-minimum-show-a-primary-image-plus-selectable-thumbnails-or-a-simple-gallery",
      "title": "Add the 4 user-uploaded product images (cmf 1.webp, cmf 2.webp, cmf 6.webp, cmf 7.webp) to the frontend as static assets and render them on the product detail page for this product (at minimum: show a primary image plus selectable thumbnails or a simple gallery).",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-update-product-list-cards-shop-page-category-page-and-featured-products-on-home-page-so-that-if-a-product-has-mapped-images-available-the-first-image-is-shown-in-the-product-card-instead-of-the-current-placeholder-block-otherwise-keep-the-existing-placeholder-behavior",
      "title": "Update product list cards (Shop page, Category page, and Featured products on Home page) so that if a product has mapped images available, the first image is shown in the product card instead of the current placeholder block; otherwise keep the existing placeholder behavior.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-add-the-4-newly-uploaded-product-images-as-static-frontend-assets-and-update-the-cmf-earbuds-image-mapping-to-use-these-exact-filenames-cmf-2-1-webp-cmf-7-1-webp-cmf-1-1-webp-cmf-6-1-webp-store-under-frontend-public-assets-products-cmf-cc-earbuds",
      "title": "Add the 4 newly uploaded product images as static frontend assets and update the CMF earbuds image mapping to use these exact filenames: \"cmf 2-1.webp\", \"cmf 7-1.webp\", \"cmf 1-1.webp\", \"cmf 6-1.webp\" (store under frontend/public/assets/products/cmf-cc-earbuds/).",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-storefront-price-displays-to-use-inr-formatting-for-the-ui-at-minimum-productcard-productdetailpage-cartpage-and-checkout-ordersummary-so-the-cmf-earbuds-shows-as-700-or-700-inr-if-a-suffix-is-used-and-remove-the-symbol-from-these-displays",
      "title": "Update all storefront price displays to use INR formatting for the UI (at minimum: ProductCard, ProductDetailPage, CartPage, and checkout OrderSummary) so the CMF earbuds shows as ₹700 (or \"₹700 INR\" if a suffix is used), and remove the \"$\" symbol from these displays.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-existing-product-with-id-cmf-earbuds-cmf-cc-bluetooth-earbuds-with-high-bass-sound-in-ear-tws-black-is-published-published-true-so-it-is-visible-on-all-public-storefront-surfaces-shop-page-category-page-and-home-featured-products-this-must-work-for-both-1-fresh-deployments-after-an-admin-runs-initializeshop-and-2-upgrades-where-the-product-already-exists-in-canister-state-and-may-currently-be-unpublished",
      "title": "Ensure the existing product with id \"cmf-earbuds\" (\"CMF CC Bluetooth Earbuds With High Bass Sound In Ear TWS Black\") is published (published=true) so it is visible on all public storefront surfaces (Shop page, Category page, and Home featured products). This must work for both (1) fresh deployments after an admin runs initializeShop and (2) upgrades where the product already exists in canister state and may currently be unpublished.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-make-product-image-resolution-robust-so-that-the-cmf-earbuds-images-render-even-if-the-product-id-or-url-encoding-causes-mismatches-specifically-1-update-productimagegallery-to-attempt-image-lookup-by-productid-and-then-fall-back-to-productname-when-no-images-are-found-and-2-update-productcard-to-resolve-the-primary-image-using-product-id-with-a-fallback-to-product-name-if-needed",
      "title": "Make product image resolution robust so that the CMF earbuds images render even if the product ID or URL encoding causes mismatches. Specifically: (1) update `ProductImageGallery` to attempt image lookup by `productId` and then fall back to `productName` when no images are found, and (2) update `ProductCard` to resolve the primary image using `product.id` with a fallback to `product.name` if needed.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-image-urls-used-by-the-product-image-mapping-are-safe-to-load-in-the-browser-when-filenames-contain-spaces-e-g-cmf-2-1-webp-update-the-product-image-helper-s-in-frontend-src-utils-productimages-ts-so-returned-image-src-values-are-properly-url-encoded-without-changing-the-actual-filenames-on-disk",
      "title": "Ensure image URLs used by the product image mapping are safe to load in the browser when filenames contain spaces (e.g., `cmf 2-1.webp`). Update the product image helper(s) in `frontend/src/utils/productImages.ts` so returned image `src` values are properly URL-encoded (without changing the actual filenames on disk).",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-stop-automatically-calling-the-admin-only-initializeshop-mutation-for-non-admin-visitors-on-the-home-page-only-allow-shop-initialization-to-run-when-the-current-caller-is-confirmed-to-be-an-admin",
      "title": "Stop automatically calling the admin-only `initializeShop()` mutation for non-admin visitors on the Home page; only allow shop initialization to run when the current caller is confirmed to be an admin.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-aware-empty-state-on-the-home-page-featured-products-section-if-there-are-no-products-and-the-caller-is-not-an-admin-show-a-friendly-empty-message-if-the-caller-is-an-admin-show-a-clear-call-to-action-to-initialize-the-shop-button-triggers-initializeshop-and-show-any-initialization-errors-in-a-user-friendly-way",
      "title": "Add an admin-aware empty-state on the Home page featured-products section: if there are no products and the caller is not an admin, show a friendly empty message; if the caller is an admin, show a clear call-to-action to initialize the shop (button triggers `initializeShop()`), and show any initialization errors in a user-friendly way.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-shop-and-category-listing-pages-never-surface-an-initialization-related-unauthorized-error-they-should-show-either-products-an-empty-state-or-a-retryable-fetch-error-from-the-product-queries-only",
      "title": "Ensure Shop and Category listing pages never surface an initialization-related unauthorized error; they should show either products, an empty state, or a retryable fetch error from the product queries only.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-cmf-earbuds-product-images-so-all-available-images-render-reliably-on-the-product-detail-page-gallery-and-on-product-cards-shop-category-home-featured-for-product-id-cmf-earbuds",
      "title": "Fix the CMF earbuds product images so all available images render reliably on the Product Detail page (gallery) and on product cards (Shop/Category/Home featured) for product id \"cmf-earbuds\".",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-add-the-user-uploaded-image-file-cmf-1-2-webp-to-the-frontend-static-product-assets-under-frontend-public-assets-products-cmf-cc-earbuds-keep-the-filename-exactly-including-spaces",
      "title": "Add the user-uploaded image file `cmf 1-2.webp` to the frontend static product assets under `frontend/public/assets/products/cmf-cc-earbuds/` (keep the filename exactly, including spaces).",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-utils-productimages-ts-to-include-the-new-image-assets-products-cmf-cc-earbuds-cmf-1-2-webp-in-the-image-mapping-for-productid-cmf-earbuds-alongside-the-existing-mapped-images",
      "title": "Update `frontend/src/utils/productImages.ts` to include the new image `/assets/products/cmf-cc-earbuds/cmf 1-2.webp` in the image mapping for productId `cmf-earbuds` (alongside the existing mapped images).",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-product-image-url-generation-so-the-returned-src-values-are-always-browser-loadable-for-filenames-containing-spaces-and-so-already-encoded-paths-do-not-get-double-encoded-update-frontend-src-utils-productimages-ts-encodeimagepath-accordingly-and-ensure-getproductimages-and-getprimaryproductimage-return-correct-stable-urls",
      "title": "Harden product image URL generation so the returned `src` values are always browser-loadable for filenames containing spaces and so already-encoded paths do not get double-encoded. Update `frontend/src/utils/productImages.ts` `encodeImagePath()` accordingly, and ensure `getProductImages()` and `getPrimaryProductImage()` return correct, stable URLs.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-user-friendly-english-error-state-when-mapped-product-images-exist-but-fail-to-load-e-g-404-so-users-are-not-left-with-a-blank-unclear-experience-implement-this-in-frontend-src-components-products-productimagegallery-tsx-and-frontend-src-components-products-productcard-tsx-using-existing-placeholder-ui-patterns-but-include-a-short-message-indicating-the-images-failed-to-load",
      "title": "Add a user-friendly, English error state when mapped product images exist but fail to load (e.g., 404) so users are not left with a blank/unclear experience. Implement this in `frontend/src/components/products/ProductImageGallery.tsx` and `frontend/src/components/products/ProductCard.tsx` using existing placeholder UI patterns, but include a short message indicating the images failed to load.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-static-product-image-url-generation-so-the-mapped-cmf-earbuds-images-load-correctly-in-production-deployments-including-internet-computer-hosting-by-generating-browser-loadable-urls-that-respect-the-app-base-path-instead-of-assuming-absolute-root-paths-while-still-correctly-handling-filenames-with-spaces-without-double-encoding",
      "title": "Fix static product image URL generation so the mapped CMF earbuds images load correctly in production deployments (including Internet Computer hosting) by generating browser-loadable URLs that respect the app base path (instead of assuming absolute root paths) while still correctly handling filenames with spaces without double-encoding.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-verify-and-correct-the-cmf-earbuds-static-asset-presence-and-exact-filenames-under-frontend-public-assets-products-cmf-cc-earbuds-so-they-match-the-mapping-in-frontend-src-utils-productimages-ts-exactly-including-spaces-and-casing-and-ensure-these-assets-are-included-in-the-deployed-frontend-build",
      "title": "Verify and correct the CMF earbuds static asset presence and exact filenames under `frontend/public/assets/products/cmf-cc-earbuds/` so they match the mapping in `frontend/src/utils/productImages.ts` exactly (including spaces and casing), and ensure these assets are included in the deployed frontend build.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-detect-internet-computer-replica-rejection-errors-that-indicate-the-backend-canister-is-stopped-e-g-reject-code-5-error-code-ic0508-message-includes-is-stopped-and-or-callcontextmanager-and-convert-them-into-a-short-user-friendly-english-error-message-for-storefront-product-browsing-queries-at-minimum-the-queries-used-by-home-featured-products-shop-page-and-category-page",
      "title": "Detect Internet Computer replica rejection errors that indicate the backend canister is stopped (e.g., Reject code 5 / error code IC0508 / message includes \"is stopped\" and/or \"CallContextManager\") and convert them into a short, user-friendly English error message for storefront product browsing queries (at minimum the queries used by Home featured products, Shop page, and Category page).",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-user-facing-error-text-introduced-or-modified-as-part-of-this-fix-is-written-in-english-including-error-titles-descriptions-and-retry-guidance-and-does-not-include-internal-codes-like-request-ids-reject-codes-cbor-details-or-principals",
      "title": "Ensure all user-facing error text introduced or modified as part of this fix is written in English (including error titles, descriptions, and retry guidance) and does not include internal codes like request IDs, reject codes, CBOR details, or principals.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-public-storefront-data-fetching-hooks-sanitize-backend-replica-errors-into-user-friendly-english-messages-including-cases-where-the-actor-is-not-yet-available-apply-the-existing-sanitizestorefronterror-behavior-consistently-to-usegetproduct-usecreateorder-and-useinitializeshop-and-also-to-the-actor-not-available-path-in-product-queries-so-users-never-see-technical-or-inconsistent-errors-across-pages",
      "title": "Ensure all public storefront data-fetching hooks sanitize backend/replica errors into user-friendly English messages, including cases where the actor is not yet available. Apply the existing `sanitizeStorefrontError()` behavior consistently to `useGetProduct`, `useCreateOrder`, and `useInitializeShop` (and also to the 'Actor not available' path in product queries) so users never see technical or inconsistent errors across pages.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-consistent-retryable-error-ux-for-the-service-temporarily-unavailable-storefront-state-on-home-shop-and-category-pages-the-error-surface-must-offer-a-clear-retry-action-wired-to-the-underlying-react-query-refetch-or-equivalent-so-users-can-recover-without-refreshing-the-whole-page",
      "title": "Add a consistent, retryable error UX for the 'service temporarily unavailable' storefront state on Home, Shop, and Category pages: the error surface must offer a clear Retry action wired to the underlying React Query `refetch()` (or equivalent) so users can recover without refreshing the whole page.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-error-message-regressions-by-ensuring-any-storefront-error-shown-via-asyncstate-uses-sanitized-plain-english-messaging-and-never-leaks-internal-error-details-reject-codes-request-ids-principals-cbor-etc-including-for-the-new-service-temporarily-unavailable-error-scenario-reported-by-the-user",
      "title": "Prevent error-message regressions by ensuring any storefront error shown via `AsyncState` uses sanitized, plain-English messaging and never leaks internal error details (reject codes, request IDs, principals, CBOR, etc.), including for the new 'service temporarily unavailable' error scenario reported by the user.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-static-product-image-url-generation-so-mapped-product-images-load-correctly-on-all-routes-e-g-shop-category-product-in-both-local-development-and-internet-computer-deployments-without-producing-incorrect-base-paths-like-product-assets-update-the-base-path-detection-logic-in-frontend-src-utils-productimages-ts-so-it-does-not-treat-normal-route-segments-e-g-product-shop-as-an-internet-computer-canister-id-prefix",
      "title": "Fix static product image URL generation so mapped product images load correctly on all routes (e.g., /shop, /category/..., /product/...) in both local development and Internet Computer deployments, without producing incorrect base paths like \"/product/assets/...\". Update the base-path detection logic in `frontend/src/utils/productImages.ts` so it does not treat normal route segments (e.g., \"product\", \"shop\") as an Internet Computer canister-id prefix.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-all-user-facing-image-error-fallback-messages-in-english-and-ensure-the-image-components-only-display-the-failed-to-load-placeholders-when-the-browser-actually-fails-to-fetch-the-mapped-image-urls-not-due-to-url-construction-bugs",
      "title": "Keep all user-facing image error/fallback messages in English and ensure the image components only display the \"failed to load\" placeholders when the browser actually fails to fetch the mapped image URLs (not due to URL construction bugs).",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-investigate-and-fix-the-root-cause-of-the-persistent-storefront-browsing-failure-that-results-in-the-user-facing-message-the-store-service-is-temporarily-unavailable-please-try-again-in-a-moment-so-that-public-users-can-load-products-on-home-shop-and-category-pages-when-the-backend-canister-is-running",
      "title": "Investigate and fix the root cause of the persistent storefront browsing failure that results in the user-facing message \"The store service is temporarily unavailable. Please try again in a moment.\" so that public users can load products on Home, Shop, and Category pages when the backend canister is running.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-refine-error-classification-and-messaging-so-that-the-sanitized-message-the-store-service-is-temporarily-unavailable-please-try-again-in-a-moment-is-only-used-for-genuine-backend-unavailable-scenarios-e-g-stopped-canister-replica-rejection-and-does-not-mask-other-errors-e-g-product-not-found-admin-only-authorization-failures-keep-all-user-facing-messaging-in-plain-english",
      "title": "Refine error classification and messaging so that the sanitized message \"The store service is temporarily unavailable. Please try again in a moment.\" is only used for genuine backend-unavailable scenarios (e.g., stopped-canister / replica rejection) and does not mask other errors (e.g., \"Product not found\", admin-only authorization failures). Keep all user-facing messaging in plain English.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-public-login-page-route-that-collects-a-person-s-name-email-address-and-phone-number-and-includes-a-phone-verification-step-using-a-one-time-code-otp-the-page-must-be-reachable-via-a-new-route-e-g-login-and-must-use-clear-plain-english-labels-validation-messages-and-button-text",
      "title": "Add a new public Login page/route that collects a person's Name, Email Address, and Phone Number, and includes a Phone Verification step using a one-time code (OTP). The page must be reachable via a new route (e.g., /login) and must use clear, plain-English labels, validation messages, and button text.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-frontend-data-hooks-react-query-for-the-phone-verification-flow-and-user-profile-save-flow-calling-new-backend-canister-methods-to-1-request-an-otp-for-a-phone-number-2-verify-an-otp-and-3-save-the-verified-user-profile-name-email-phone-for-the-logged-in-principal",
      "title": "Implement frontend data hooks (React Query) for the phone verification flow and user profile save flow, calling new backend canister methods to (1) request an OTP for a phone number, (2) verify an OTP, and (3) save the verified user profile (name/email/phone) for the logged-in principal.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-add-navigation-access-to-the-login-page-from-the-site-header-and-add-the-needed-navigation-label-s-to-the-centralized-content-configuration-so-the-visible-link-text-remains-editable-in-one-place",
      "title": "Add navigation access to the Login page from the site header, and add the needed navigation label(s) to the centralized content configuration so the visible link text remains editable in one place.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    },
    {
      "id": "feature-set-the-default-phone-dial-country-code-to-india-91-in-the-login-phone-verification-flow-by-pre-filling-the-login-page-phone-number-field-with-the-91-prefix-while-still-allowing-the-user-to-edit-the-number-also-update-the-phone-input-placeholder-to-an-india-format-example-e-g-91-98765-43210-so-the-default-and-guidance-are-consistent",
      "title": "Set the default phone dial/country code to India (+91) in the Login/phone verification flow by pre-filling the Login page phone number field with the \"+91\" prefix (while still allowing the user to edit the number). Also update the phone input placeholder to an India-format example (e.g., \"+91 98765 43210\") so the default and guidance are consistent.",
      "reqIds": [
        "REQ-60"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-login-page-flow-to-require-internet-identity-authentication-before-attempting-to-save-a-user-profile-or-start-phone-verification-if-the-visitor-is-not-authenticated-anonymous-identity-show-a-clear-call-to-action-to-sign-in-with-internet-identity-and-disable-the-send-verification-code-action-until-sign-in-completes",
      "title": "Update the Login page flow to require Internet Identity authentication before attempting to save a user profile or start phone verification. If the visitor is not authenticated (anonymous identity), show a clear call-to-action to sign in with Internet Identity and disable the \"Send Verification Code\" action until sign-in completes.",
      "reqIds": [
        "REQ-61"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-frontend-error-handling-for-the-login-profile-save-phone-verification-flow-so-that-authorization-related-backend-traps-e-g-unauthorized-only-users-can-save-profiles-are-converted-into-a-user-friendly-english-message-that-instructs-the-user-to-sign-in-and-try-again-without-displaying-internal-technical-wording",
      "title": "Harden frontend error handling for the login/profile save + phone verification flow so that authorization-related backend traps (e.g., \"Unauthorized: Only users can save profiles\") are converted into a user-friendly English message that instructs the user to sign in and try again, without displaying internal/technical wording.",
      "reqIds": [
        "REQ-62"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create an e-commerce company website for 'The Lens' to sell trending/viral products (electronics, home decor, etc.).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Add backend data models and APIs to store and serve a product catalog (including categories like Electronics and Home Decor) and to accept checkout submissions by creating an order record.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Enable custom domain support for the deployed website (DNS configuration + canister domain verification/SSL).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add a way to publish products on the site (create/update product entries and control whether they are visible in the storefront).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Extend the backend product model to support publishing/unpublishing products, so admins can control whether a product is visible in the public storefront.",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Update backend product query APIs used by the storefront to return only published products, while also providing an admin-only API to list all products (published and unpublished).",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add backend admin-only APIs to create new products and update existing products, including the ability to set or toggle publish status.",
      "reqIds": [
        "REQ-12"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Update site contact email address to official.thelens@gmail.com wherever the marketing/contact email is displayed (e.g., footer, contact section, checkout email field placeholder if applicable).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Remove the \"Call Us\" section and the \"Visit Us\" section from the site (About/Contact page or wherever they appear).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Add an owner credit line to the About section: below the “Built with using caffeine.ai” text, display “OWNER NAME - VAIBHAV SHARMA.”",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Create a new Electronics product entry in the backend catalog for \"CMF CC Bluetooth Earbuds With High Bass Sound In Ear TWS Black\" using the existing admin product APIs, ensuring it is added in a way that does not require manual data entry through the UI after deployment.",
      "reqIds": [
        "REQ-18"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Publish the existing CMF earbuds product so it becomes visible on the public storefront (set published=true).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-16",
      "summary": "Set the existing product with id \"cmf-earbuds\" (\"CMF CC Bluetooth Earbuds With High Bass Sound In Ear TWS Black\") to published=true so it becomes visible on the public storefront (Shop page, Category page, and Home featured products). This must work both for fresh deployments (initial product seed) and for upgrades where the product already exists in canister state.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Update the CMF earbuds product details: set price to 700 INR, add warranty info (6 months), and add the user-attached product pictures to be shown on the product detail page (and wherever product images are used).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Update the backend product record for product id \"cmf-earbuds\" so its price is 700 (representing 700 INR) and its description includes a clear warranty line: \"Warranty: 6 months\".",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Ensure the backend update in REQ-23 applies both for fresh deployments (shop initialization/seed data) and for upgrades where the \"cmf-earbuds\" product already exists in canister state (apply a safe, conditional migration/upgrade step to update price/description without deleting other products).",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Verify backend product listing endpoints used by the storefront (`getAllProducts`, `getProductsByCategory`, `getProduct`) do not trap for normal public access when products exist and are published, and that the seeded product `cmf-earbuds` remains `published=true` after deployment/upgrade so at least one product is visible in the storefront.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Update the CMF earbuds product warranty type/label to \"Seller's Warranty\" (ensure this is reflected on the product detail page, e.g., in the description/specs).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Ensure the 4 CMF earbuds image files exist as static frontend assets under `frontend/public/assets/products/cmf-cc-earbuds/` and that `frontend/src/utils/productImages.ts` maps productId `cmf-earbuds` to those exact filenames so the browser can load them even though the filenames include spaces.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Update the CMF earbuds product data so the warranty type is \"Seller's Warranty\" (replacing the existing \"Warranty Type: No Warranty\" line) and ensure this change applies both (1) on fresh deployments when an admin runs `initializeShop()` and (2) on upgrades when the product already exists in canister state.",
      "reqIds": [
        "REQ-36"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Add the newly attached product images to the CMF earbuds product and ensure they render correctly on the product detail page/gallery and product cards (Shop/Category/Home featured).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Verify the CMF earbuds static product images are present in the deployed frontend build and loadable by the browser from the exact mapped paths under `frontend/public/assets/products/cmf-cc-earbuds/` (including filenames with spaces): `cmf 1-2.webp`, `cmf 2-1.webp`, `cmf 7-1.webp`, `cmf 1-1.webp`, `cmf 6-1.webp`. If any file is missing or misnamed, add/correct it without renaming the filenames in code (keep filenames exactly as mapped).",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Apply the same stopped-canister error sanitization on the Home page featured products section (HomePage currently passes the raw error into AsyncState) so that the Home page never surfaces the raw IC replica rejection details to end users.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Ensure the storefront error state for \"service temporarily unavailable\" is consistently retryable across Home, Shop, and Category pages: the error UI must show a clear \"Retry\" action that calls the underlying React Query `refetch()` for that page’s product query, and all user-facing error text must be in English.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Add a user login/registration page that collects Name, Email, and Phone Number, and verifies the phone number via SMS (OTP code) before allowing access.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Extend the backend user profile model to store Name, Email Address, Phone Number, and a boolean indicating whether the phone number has been verified. Update existing profile APIs to use the expanded UserProfile type while maintaining access control (only the caller can save their profile; admins can view others only as currently allowed).",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Add backend APIs to support phone verification via OTP: (1) requestPhoneVerification(phone: Text) returns a short-lived OTP challenge (without exposing internal details), and (2) verifyPhoneVerificationCode(phone: Text, code: Text) marks the caller's phone as verified when the code matches and is not expired. OTPs must be scoped to the caller and expire after a short time window.",
      "reqIds": [
        "REQ-58"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Set the default country/phone dial code to India (+91) in the phone number input for the login/phone verification flow.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Fix the backend authorization logic for user profile and phone verification APIs so that an authenticated caller who is not yet marked as a \"user\" can complete the login flow successfully. Specifically, ensure first-time authenticated principals can save their own profile and perform phone verification without requiring a pre-existing manual permission grant, while still preventing anonymous callers from using these APIs.",
      "reqIds": [
        "REQ-63"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "The Lens",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}